{"ast":null,"code":"import _classCallCheck from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Button}from\"react-bootstrap\";import{programs,remove,change}from'./UserFunctions';import{AddCredentialForm}from'./AddForm';import\"./Programs.css\";var ProgramsList=/*#__PURE__*/function(_Component){_inherits(ProgramsList,_Component);function ProgramsList(props){var _this;_classCallCheck(this,ProgramsList);_this=_possibleConstructorReturn(this,_getPrototypeOf(ProgramsList).call(this,props));_this.state={programList:[],makeChanges:false,programChanges:[]};_this.getToken=_this.getToken.bind(_assertThisInitialized(_this));_this.handleDeleteRow=_this.handleDeleteRow.bind(_assertThisInitialized(_this));_this.handleChangeRow=_this.handleChangeRow.bind(_assertThisInitialized(_this));return _this;}_createClass(ProgramsList,[{key:\"removeRow\",value:function removeRow(programName){console.log({programName:programName});this.setState(function(prevState){var programList=prevState.programList.filter(function(programList){return programList.program!==programName;});return{programList:programList};});}},{key:\"handleDeleteRow\",value:function handleDeleteRow(programName){var _this2=this;console.log({programName:programName});remove(programName).then(function(res){if(!res.err){console.log('Credentials deleted');_this2.removeRow(programName);_this2.createTable();}});}},{key:\"handleChangeRow\",value:function handleChangeRow(programID){var willChange=this.state.programList.find(function(_ref){var id=_ref.id;return id===programID;});this.setState({makeChanges:true,programChanges:willChange});console.log(this.state.programChanges);console.log({willChange:willChange});}},{key:\"createTable\",value:function createTable(){var _this3=this;var programList=this.state.programList;if(programList.length===0){return React.createElement(\"p\",null,\"Start by adding new credentials\");}return React.createElement(\"table\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Program\"),React.createElement(\"th\",null,\"Username\"),React.createElement(\"th\",null,\"Password\"),React.createElement(\"th\",null,\"Actions\")),programList.map(function(item,i){return React.createElement(\"tr\",null,React.createElement(\"td\",{key:i},React.createElement(\"p\",null,item.program)),React.createElement(\"td\",{key:i},React.createElement(\"p\",null,item.username)),React.createElement(\"td\",{key:i},React.createElement(\"p\",null,item.password)),React.createElement(\"td\",null,React.createElement(Button,{className:\"delete-btn\",block:true,bsSize:\"large\",onClick:function onClick(i){return _this3.handleDeleteRow(item.program);}}),React.createElement(Button,{className:\"change-btn\",block:true,bsSize:\"large\",onClick:function onClick(e){return _this3.handleChangeRow(item.id);}})));}));}},{key:\"getToken\",value:function getToken(){return localStorage.getItem('jwt-token');}},{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;var token=this.getToken();//console.log(token)\nif(!token){this.props.history.push('/');}programs(token).then(function(res){if(!res.err){_this4.setState({programList:res.programs});//localStorage.setItem({'programList': res.programs})\n}else{console.log(res.err);}});}},{key:\"createForm\",value:function createForm(){if(!this.state.makeChanges){return React.createElement(AddCredentialForm,null);}else{return React.createElement(AddCredentialForm,{willPrefill:this.state.programChanges});}}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"Programs\"},React.createElement(\"h1\",null,\"KEYBANK\"),this.createTable(),this.createForm());}}]);return ProgramsList;}(Component);export default ProgramsList;","map":{"version":3,"sources":["/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/src/components/Programs.js"],"names":["React","Component","Button","programs","remove","change","AddCredentialForm","ProgramsList","props","state","programList","makeChanges","programChanges","getToken","bind","handleDeleteRow","handleChangeRow","programName","console","log","setState","prevState","filter","program","then","res","err","removeRow","createTable","programID","willChange","find","id","length","map","item","i","username","password","e","localStorage","getItem","token","history","push","createForm"],"mappings":"48BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,MAAT,KAAuB,iBAAvB,CACA,OAASC,QAAT,CAAmBC,MAAnB,CAA2BC,MAA3B,KAAyC,iBAAzC,CACA,OAASC,iBAAT,KAAkC,WAAlC,CAEA,MAAO,gBAAP,C,GAGMC,CAAAA,Y,sEACF,sBAAYC,KAAZ,CAAmB,8CACf,8EAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACTC,WAAW,CAAE,EADJ,CAETC,WAAW,CAAE,KAFJ,CAGTC,cAAc,CAAE,EAHP,CAAb,CAMA,MAAKC,QAAL,CAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB,CACA,MAAKC,eAAL,CAAuB,MAAKA,eAAL,CAAqBD,IAArB,+BAAvB,CACA,MAAKE,eAAL,CAAuB,MAAKA,eAAL,CAAqBF,IAArB,+BAAvB,CAVe,aAWlB,C,qEAESG,W,CAAa,CAEnBC,OAAO,CAACC,GAAR,CAAY,CAAEF,WAAW,CAAXA,WAAF,CAAZ,EACA,KAAKG,QAAL,CAAc,SAAAC,SAAS,CAAI,CACvB,GAAMX,CAAAA,WAAW,CAAGW,SAAS,CAACX,WAAV,CAAsBY,MAAtB,CAA6B,SAAAZ,WAAW,QAAIA,CAAAA,WAAW,CAACa,OAAZ,GAAwBN,WAA5B,EAAxC,CAApB,CAEA,MAAO,CAAEP,WAAW,CAAXA,WAAF,CAAP,CACH,CAJD,EAMH,C,wDAEeO,W,CAAa,iBACzBC,OAAO,CAACC,GAAR,CAAY,CAAEF,WAAW,CAAXA,WAAF,CAAZ,EACAb,MAAM,CAACa,WAAD,CAAN,CAAoBO,IAApB,CAAyB,SAAAC,GAAG,CAAI,CAC5B,GAAG,CAACA,GAAG,CAACC,GAAR,CAAa,CAETR,OAAO,CAACC,GAAR,CAAY,qBAAZ,EACA,MAAI,CAACQ,SAAL,CAAeV,WAAf,EACA,MAAI,CAACW,WAAL,GACH,CACJ,CAPD,EAQH,C,wDAIeC,S,CAAU,CACtB,GAAMC,CAAAA,UAAU,CAAG,KAAKrB,KAAL,CAAWC,WAAX,CAAuBqB,IAAvB,CAA4B,kBAAEC,CAAAA,EAAF,MAAEA,EAAF,OAAWA,CAAAA,EAAE,GAAKH,SAAlB,EAA5B,CAAnB,CACA,KAAKT,QAAL,CAAc,CACVT,WAAW,CAAE,IADH,CAEVC,cAAc,CAAEkB,UAFN,CAAd,EAIAZ,OAAO,CAACC,GAAR,CAAY,KAAKV,KAAL,CAAWG,cAAvB,EACAM,OAAO,CAACC,GAAR,CAAY,CAACW,UAAU,CAAVA,UAAD,CAAZ,EACH,C,iDAGa,oBACFpB,CAAAA,WADE,CACc,KAAKD,KADnB,CACFC,WADE,CAEV,GAAIA,WAAW,CAACuB,MAAZ,GAAuB,CAA3B,CAA6B,CACzB,MAAO,gEAAP,CACH,CACD,MAAO,kCACH,8BACI,wCADJ,CAEI,yCAFJ,CAGI,yCAHJ,CAII,wCAJJ,CADG,CAQFvB,WAAW,CAACwB,GAAZ,CAAgB,SAACC,IAAD,CAAOC,CAAP,QAEf,+BAEE,0BAAI,GAAG,CAAEA,CAAT,EACE,6BAAID,IAAI,CAACZ,OAAT,CADF,CAFF,CAKE,0BAAI,GAAG,CAAEa,CAAT,EACE,6BAAID,IAAI,CAACE,QAAT,CADF,CALF,CAQE,0BAAI,GAAG,CAAED,CAAT,EACE,6BAAID,IAAI,CAACG,QAAT,CADF,CARF,CAWE,8BACE,oBAAC,MAAD,EAAQ,SAAS,CAAC,YAAlB,CAA+B,KAAK,KAApC,CAAqC,MAAM,CAAC,OAA5C,CAAoD,OAAO,CAAE,iBAAAF,CAAC,QAAI,CAAA,MAAI,CAACrB,eAAL,CAAqBoB,IAAI,CAACZ,OAA1B,CAAJ,EAA9D,EADF,CAGE,oBAAC,MAAD,EAAQ,SAAS,CAAC,YAAlB,CAA+B,KAAK,KAApC,CAAqC,MAAM,CAAC,OAA5C,CAAoD,OAAO,CAAE,iBAAAgB,CAAC,QAAI,CAAA,MAAI,CAACvB,eAAL,CAAqBmB,IAAI,CAACH,EAA1B,CAAJ,EAA9D,EAHF,CAXF,CAFe,EAAhB,CARE,CAAP,CA+BH,C,2CAIS,CACN,MAAOQ,CAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAP,CACH,C,6DAEmB,iBAChB,GAAMC,CAAAA,KAAK,CAAG,KAAK7B,QAAL,EAAd,CACA;AACA,GAAG,CAAC6B,KAAJ,CAAU,CACN,KAAKlC,KAAL,CAAWmC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACH,CACDzC,QAAQ,CAACuC,KAAD,CAAR,CAAgBlB,IAAhB,CAAqB,SAAAC,GAAG,CAAI,CAExB,GAAG,CAACA,GAAG,CAACC,GAAR,CAAa,CACT,MAAI,CAACN,QAAL,CAAc,CACVV,WAAW,CAAEe,GAAG,CAACtB,QADP,CAAd,EAIA;AAEH,CAPD,IAOM,CACFe,OAAO,CAACC,GAAR,CAAYM,GAAG,CAACC,GAAhB,EACH,CACJ,CAZD,EAaH,C,+CAEW,CACR,GAAG,CAAC,KAAKjB,KAAL,CAAWE,WAAf,CAA2B,CACvB,MAAO,qBAAC,iBAAD,MAAP,CACH,CAFD,IAEO,CACH,MAAO,qBAAC,iBAAD,EAAmB,WAAW,CAAI,KAAKF,KAAL,CAAWG,cAA7C,EAAP,CACH,CACJ,C,uCACO,CACJ,MACA,4BAAK,SAAS,CAAC,UAAf,EACI,wCADJ,CAEM,KAAKgB,WAAL,EAFN,CAGM,KAAKiB,UAAL,EAHN,CADA,CAOH,C,0BAlIsB5C,S,EAuI3B,cAAeM,CAAAA,YAAf","sourcesContent":["import React, { Component } from 'react'\nimport { Button } from \"react-bootstrap\"\nimport { programs, remove, change } from './UserFunctions'\nimport { AddCredentialForm } from './AddForm'\n\nimport \"./Programs.css\"\n\n\nclass ProgramsList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            programList: [],\n            makeChanges: false,\n            programChanges: []\n\n        }\n        this.getToken = this.getToken.bind(this);\n        this.handleDeleteRow = this.handleDeleteRow.bind(this);\n        this.handleChangeRow = this.handleChangeRow.bind(this);\n    }\n\n    removeRow(programName) {\n        \n        console.log({ programName })\n        this.setState(prevState => {\n            const programList = prevState.programList.filter(programList => programList.program !== programName);\n\n            return { programList };\n        });    \n\n    }\n\n    handleDeleteRow(programName) {\n        console.log({ programName })\n        remove(programName).then(res => {\n            if(!res.err) {\n\n                console.log('Credentials deleted')\n                this.removeRow(programName)\n                this.createTable()\n            }               \n        });\n    }\n\n\n\n    handleChangeRow(programID){\n        const willChange = this.state.programList.find(({id}) =>  id === programID)\n        this.setState({\n            makeChanges: true,\n            programChanges: willChange\n        })\n        console.log(this.state.programChanges)\n        console.log({willChange})\n    }\n\n\n    createTable() {\n        const { programList } = this.state;\n        if (programList.length === 0){\n            return <p>Start by adding new credentials</p>\n        }\n        return <table>\n            <tr>\n                <th>Program</th>\n                <th>Username</th>\n                <th>Password</th>\n                <th>Actions</th>\n            </tr>\n            \n            {programList.map((item, i) => (\n            \n              <tr>\n\n                <td key={i}>\n                  <p>{item.program}</p>\n                </td>\n                <td key={i}>\n                  <p>{item.username}</p>\n                </td>\n                <td key={i}>\n                  <p>{item.password}</p>\n                </td>\n                <td>\n                  <Button className=\"delete-btn\" block bsSize=\"large\" onClick={i => this.handleDeleteRow(item.program)}>\n                  </Button>\n                  <Button className=\"change-btn\" block bsSize=\"large\" onClick={e => this.handleChangeRow(item.id)}>\n                  </Button>\n                </td>\n            </tr>\n            \n            ))}\n        </table>\n    }\n\n\n    \n    getToken(){\n        return localStorage.getItem('jwt-token');\n    };\n\n    componentDidMount() {\n        const token = this.getToken();\n        //console.log(token)\n        if(!token){\n            this.props.history.push('/')\n        }\n        programs(token).then(res => {\n            \n            if(!res.err) {\n                this.setState({\n                    programList: res.programs\n                })\n                \n                //localStorage.setItem({'programList': res.programs})\n                    \n            } else{\n                console.log(res.err)\n            }     \n        })        \n    }\n\n    createForm(){\n        if(!this.state.makeChanges){\n            return <AddCredentialForm/>\n        } else {\n            return <AddCredentialForm willPrefill = {this.state.programChanges}/>\n        }\n    }\n    render(){\n        return (\n        <div className=\"Programs\">\n            <h1>KEYBANK</h1>\n            { this.createTable() }\n            { this.createForm() }\n        </div>\n        )\n    }\n\n    \n}\n\nexport default ProgramsList;"]},"metadata":{},"sourceType":"module"}