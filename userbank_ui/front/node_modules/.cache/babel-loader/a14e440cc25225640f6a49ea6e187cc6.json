{"ast":null,"code":"import _defineProperty from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Button,FormGroup,FormLabel,FormControl}from\"react-bootstrap\";import{programs,credentials,remove,change}from'./UserFunctions';import\"./Programs.css\";var ProgramsList=/*#__PURE__*/function(_Component){_inherits(ProgramsList,_Component);function ProgramsList(props){var _this;_classCallCheck(this,ProgramsList);_this=_possibleConstructorReturn(this,_getPrototypeOf(ProgramsList).call(this,props));_this.state={programList:[],//store initial list of programs and credentials\nmakeChanges:false,//true if user wants to change existing credentials \nprogram:'',username:'',password:'',password_re:'',programChanges:[]};_this.getToken=_this.getToken.bind(_assertThisInitialized(_this));//get token from local storage\n_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.handleDeleteRow=_this.handleDeleteRow.bind(_assertThisInitialized(_this));//handler to delete a row\n_this.handleChangeRow=_this.handleChangeRow.bind(_assertThisInitialized(_this));return _this;}_createClass(ProgramsList,[{key:\"removeRow\",value:function removeRow(programName){this.setState(function(prevState){var programList=prevState.programList.filter(function(programList){return programList.program!==programName;});return{programList:programList};});}},{key:\"handleDeleteRow\",value:function handleDeleteRow(programName){var _this2=this;remove(programName).then(function(res){if(!res.err){_this2.removeRow(programName);_this2.createTable();}});}},{key:\"handleChangeRow\",value:function handleChangeRow(programID){var willChange=this.state.programList.find(function(_ref){var id=_ref.id;return id===programID;});this.setState({makeChanges:true,programChanges:willChange,program:'',username:'',password:'',password_re:''});}},{key:\"inputValues\",value:function inputValues(){if(this.state.makeChanges){var inputValues={program:this.state.programChanges.program,username:this.state.programChanges.username,password:this.state.programChanges.password,password_re:this.state.programChanges.password};return inputValues;}else{var _inputValues={program:this.state.program,username:this.state.username,password:this.state.password,password_re:this.state.password};return _inputValues;}}},{key:\"createForm\",value:function createForm(){var inputValue=this.inputValues();return React.createElement(\"form\",{noValidate:true,onSubmit:this.onSubmit},React.createElement(FormGroup,{controlId:\"program\",bsSize:\"large\"},React.createElement(FormLabel,null,\"Program\"),React.createElement(FormControl,{type:\"program\",name:\"program\",defaultValue:inputValue.program,onChange:this.onChange})),React.createElement(FormGroup,{controlId:\"username\",bsSize:\"large\"},React.createElement(FormLabel,null,\"Username\"),React.createElement(FormControl,{type:\"username\",name:\"username\",defaultValue:inputValue.username,onChange:this.onChange})),React.createElement(FormGroup,{controlId:\"password\",bsSize:\"large\"},React.createElement(FormLabel,null,\"Password\"),React.createElement(FormControl,{type:\"password\",name:\"password\",defaultValue:inputValue.password,onChange:this.onChange})),React.createElement(FormGroup,{controlId:\"password_re\",bsSize:\"large\"},React.createElement(FormLabel,null,\"Password again\"),React.createElement(FormControl,{type:\"password\",name:\"password_re\",defaultValue:inputValue.password_re,onChange:this.onChange})),React.createElement(\"div\",{className:\"button-group\"},React.createElement(Button,{className:\"register-btn\",block:true,bsSize:\"large\",disabled:!this.validateForm(),type:\"submit\"},\"Add program\")));}},{key:\"createTable\",value:function createTable(){var _this3=this;var programList=this.state.programList;if(programList.length===0){return React.createElement(\"p\",null,\"Start by adding new credentials\");}return React.createElement(\"table\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Program\"),React.createElement(\"th\",null,\"Username\"),React.createElement(\"th\",null,\"Password\"),React.createElement(\"th\",null,\"Actions\")),programList.map(function(item,i){return React.createElement(\"tr\",null,React.createElement(\"td\",{key:i},React.createElement(\"p\",null,item.program)),React.createElement(\"td\",{key:i},React.createElement(\"p\",null,item.username)),React.createElement(\"td\",{key:i},React.createElement(\"p\",null,item.password)),React.createElement(\"td\",null,React.createElement(Button,{className:\"delete-btn\",block:true,bsSize:\"large\",onClick:function onClick(i){return _this3.handleDeleteRow(item.program);}}),React.createElement(Button,{className:\"change-btn\",block:true,bsSize:\"large\",onClick:function onClick(e){return _this3.handleChangeRow(item.id);}})));}));}},{key:\"onChange\",value:function onChange(e){this.setState(_defineProperty({},e.target.name,e.target.value));}},{key:\"validateForm\",value:function validateForm(){if('username'in this.state.programChanges){return true;}else{if(this.state.username.length>0&&this.state.password.length>0&&this.state.password_re.length>0){return this.state.password===this.state.password_re;}}}},{key:\"onSubmit\",value:function onSubmit(e){var _this4=this;e.preventDefault();var newProgram={program:this.state.program,username:this.state.username,password:this.state.password,id:localStorage.id};if(newProgram.program===''){newProgram.program=this.state.programChanges.program;}if(newProgram.username===''){newProgram.username=this.state.programChanges.username;}if(newProgram.password===''){newProgram.password=this.state.programChanges.password;}credentials(newProgram).then(function(res){if(!res.err){var newRow={program:newProgram.program,username:newProgram.username,password:newProgram.password};_this4.setState({programList:_this4.state.programList.concat(newRow)});_this4.createTable();}});console.log(this.state.program);console.log(this.state.programChanges);this.setState({program:'',username:'',password:'',password_re:'',programChanges:[],makeChanges:false});console.log(this.state.program);console.log(this.state.programChanges);}},{key:\"getToken\",value:function getToken(){return localStorage.getItem('jwt-token');}},{key:\"componentDidMount\",value:function componentDidMount(){var _this5=this;var token=this.getToken();if(!token){this.props.history.push('/');}programs(token).then(function(res){if(!res.err){_this5.setState({programList:res.programs});}}).catch(function(err){_this5.props.history.push('/');});}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"Programs\"},React.createElement(\"h1\",null,\"KEYBANK\"),React.createElement(\"div\",{className:\"programtable\"},this.createTable()),React.createElement(\"div\",{className:\"addform\"},this.createForm()));}}]);return ProgramsList;}(Component);export default ProgramsList;","map":{"version":3,"sources":["/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/src/components/Programs.js"],"names":["React","Component","Button","FormGroup","FormLabel","FormControl","programs","credentials","remove","change","ProgramsList","props","state","programList","makeChanges","program","username","password","password_re","programChanges","getToken","bind","onChange","onSubmit","handleDeleteRow","handleChangeRow","programName","setState","prevState","filter","then","res","err","removeRow","createTable","programID","willChange","find","id","inputValues","inputValue","validateForm","length","map","item","i","e","target","name","value","preventDefault","newProgram","localStorage","newRow","concat","console","log","getItem","token","history","push","catch","createForm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Button, FormGroup, FormLabel, FormControl} from \"react-bootstrap\"\nimport { programs, credentials, remove, change } from './UserFunctions'\n\n\nimport \"./Programs.css\"\n\n\nclass ProgramsList extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            programList: [], //store initial list of programs and credentials\n            makeChanges: false, //true if user wants to change existing credentials \n            program: '', \n            username: '',\n            password:'',\n            password_re:'',\n            programChanges: []\n\n        }\n        this.getToken = this.getToken.bind(this) //get token from local storage\n        this.onChange = this.onChange.bind(this)\n        this.onSubmit = this.onSubmit.bind(this)\n        this.handleDeleteRow = this.handleDeleteRow.bind(this) //handler to delete a row\n        this.handleChangeRow = this.handleChangeRow.bind(this)\n    }\n\n    removeRow(programName) {\n        \n        this.setState(prevState => {\n            const programList = prevState.programList.filter(programList => programList.program !== programName)\n            return { programList }\n        })    \n\n    }\n\n    handleDeleteRow(programName) {\n        remove(programName).then(res => {\n            if(!res.err) {\n                this.removeRow(programName)\n                this.createTable()\n            }               \n        })\n    }\n\n    handleChangeRow(programID){\n        const willChange = this.state.programList.find(({id}) =>  id === programID)\n        this.setState({\n            makeChanges: true,\n            programChanges: willChange,\n            program: '',\n            username: '',\n            password:'',\n            password_re:'',\n\n        }) \n    }\n\n    inputValues(){\n        if(this.state.makeChanges){\n            const inputValues ={\n                program: this.state.programChanges.program,\n                username: this.state.programChanges.username,\n                password: this.state.programChanges.password,   \n                password_re: this.state.programChanges.password\n            }\n            return inputValues\n            \n        }else{\n            const inputValues={\n                program: this.state.program,\n                username: this.state.username,\n                password: this.state.password,\n                password_re: this.state.password\n            }         \n            return inputValues\n        }\n    }\n\n    createForm(){\n        const inputValue = this.inputValues()\n        return <form noValidate onSubmit={this.onSubmit}>\n                <FormGroup controlId=\"program\" bsSize=\"large\">\n                    <FormLabel>Program</FormLabel>\n                    <FormControl\n                        type=\"program\"\n                        name=\"program\"\n                        defaultValue={ inputValue.program }\n                        onChange={this.onChange}\n                    />\n                </FormGroup>\n                <FormGroup controlId=\"username\" bsSize=\"large\">\n                    <FormLabel>Username</FormLabel>\n                    <FormControl\n                        type=\"username\"\n                        name=\"username\"\n                        defaultValue={ inputValue.username }\n                        onChange={this.onChange}\n                    />\n                </FormGroup>\n                <FormGroup controlId=\"password\" bsSize=\"large\">\n                    <FormLabel>Password</FormLabel>\n                    <FormControl\n                        type=\"password\"\n                        name=\"password\"\n                        defaultValue={ inputValue.password }\n                        onChange={this.onChange}\n                    />\n                </FormGroup>\n                <FormGroup controlId=\"password_re\" bsSize=\"large\">\n                    <FormLabel>Password again</FormLabel>\n                    <FormControl\n                        type=\"password\"\n                        name=\"password_re\"\n                        defaultValue={ inputValue.password_re }\n                        onChange={this.onChange}\n                    />\n                </FormGroup>\n                <div className=\"button-group\">\n                    <Button className=\"register-btn\" block bsSize=\"large\" disabled={!this.validateForm()} type=\"submit\">\n                        Add program\n                    </Button>\n                </div>\n            </form>        \n    }\n\n    createTable() {\n        const { programList } = this.state\n        if (programList.length === 0){\n            return <p>Start by adding new credentials</p>\n        }\n        return <table>\n            <tr>\n                <th>Program</th>\n                <th>Username</th>\n                <th>Password</th>\n                <th>Actions</th>\n            </tr>\n            \n            {programList.map((item, i) => (\n            \n              <tr>\n                <td key={i}>\n                  <p>{item.program}</p>\n                </td>\n                <td key={i}>\n                  <p>{item.username}</p>\n                </td>\n                <td key={i}>\n                  <p>{item.password}</p>\n                </td>\n                <td>\n                  <Button className=\"delete-btn\" block bsSize=\"large\" onClick={i => this.handleDeleteRow(item.program)}>\n                  </Button>\n                  <Button className=\"change-btn\" block bsSize=\"large\" onClick={e => this.handleChangeRow(item.id)}>\n                  </Button>\n                </td>\n            </tr>\n            \n            ))}\n        </table>\n    }\n\n    onChange(e){\n        this.setState({[e.target.name]: e.target.value})\n    }\n\n    validateForm() {\n        if('username' in this.state.programChanges){\n            return true\n        } else{\n            if (this.state.username.length > 0 && this.state.password.length > 0 && this.state.password_re.length > 0){ \n                return this.state.password === this.state.password_re\n            } \n        }      \n    }\n\n    onSubmit(e) {\n        e.preventDefault()\n               \n        var newProgram = {\n            program: this.state.program,\n            username: this.state.username,\n            password: this.state.password,           \n            id: localStorage.id\n        }\n\n        if (newProgram.program === ''){\n            newProgram.program = this.state.programChanges.program\n        } \n        if (newProgram.username === ''){\n            newProgram.username = this.state.programChanges.username\n        } \n        if (newProgram.password === ''){\n            newProgram.password = this.state.programChanges.password\n        } \n\n        credentials(newProgram).then(res => {\n            if(!res.err) {\n                var newRow = {\n                    program: newProgram.program,\n                    username: newProgram.username,\n                    password: newProgram.password,\n                }\n                this.setState({programList: this.state.programList.concat(newRow)})\n                this.createTable()\n            }               \n        })\n        console.log(this.state.program)\n        console.log(this.state.programChanges)\n        this.setState ({\n            program: '',\n            username: '',\n            password:'',\n            password_re:'',\n            programChanges:[],\n            makeChanges: false\n        })\n        console.log(this.state.program)\n        console.log(this.state.programChanges)\n    }\n    \n    getToken(){\n        return localStorage.getItem('jwt-token')\n    }\n\n    componentDidMount() {\n        const token = this.getToken()\n        if(!token){\n            this.props.history.push('/')\n        }\n        programs(token).then(res => {      \n            if(!res.err) {\n                this.setState({\n                    programList: res.programs\n                })  \n            }\n        }).catch(err =>{\n            this.props.history.push('/')        \n        })\n    }\n\n   \n    render(){\n        return (\n        <div className=\"Programs\">\n            <h1>KEYBANK</h1>\n            <div className=\"programtable\">\n                { this.createTable() }\n            </div>\n            <div className=\"addform\">\n                { this.createForm() }\n            </div>\n        </div>\n        )\n    }   \n}\n\nexport default ProgramsList"]},"metadata":{},"sourceType":"module"}