{"ast":null,"code":"import _toConsumableArray from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Button,FormGroup,FormLabel,FormControl}from\"react-bootstrap\";import{programs,credentials,remove,change}from'./UserFunctions';import\"./Programs.css\";var ProgramsList=/*#__PURE__*/function(_Component){_inherits(ProgramsList,_Component);function ProgramsList(props){var _this;_classCallCheck(this,ProgramsList);_this=_possibleConstructorReturn(this,_getPrototypeOf(ProgramsList).call(this,props));_this.resetFormState=function(){_this.setState({formState:{program:'',username:'',password:'',password_re:'',id:\"\"}});};_this.onChange=function(e){_this.setState({formState:_objectSpread({},_this.state.formState,_defineProperty({},e.target.name,e.target.value))});};_this.onSubmit=function(e){var _this$state=_this.state,programList=_this$state.programList,formState=_this$state.formState;e.preventDefault();var program=e.target.querySelector(\"input[name='program']\").value;var username=e.target.querySelector(\"input[name='username']\").value;var password=e.target.querySelector(\"input[name='password']\").value;var password_re=e.target.querySelector(\"input[name='password_re']\").value;if(formState.mode===\"submit\"){_this.setState({programList:[].concat(_toConsumableArray(_this.state.programList),[{program:program,username:username,password:password,password_re:password_re,updating:false,id:_this.state.programList[_this.state.users.lenght-1].id+1}])});}else if(formState.mode===\"edit\"){var index=programList.find(function(item){return item.id===formState.id;}).id;programList[index]={program:program,username:username,password:password,updating:false,id:programList[index].id};_this.setState({programList:_toConsumableArray(programList)});}_this.resetFormState();};_this.updateCredentials=function(key){var programList=_this.state.programList;programList[key].updating=true;_this.setState({formState:_objectSpread({},_this.state.programList[key],{mode:\"edit\"}),programList:programList});};_this.deleteCredentials=function(key){var programList=_this.state.programList;programList.splice(key,1);_this.setState({programList:_toConsumableArray(programList)});};_this.state={programList:[],//store initial list of programs and credentials\nmakeChanges:false,//true if user wants to change existing credentials \nprogramChanges:[],formState:{program:'',username:'',password:'',password_re:'',mode:\"submit\"}};_this.getToken=_this.getToken.bind(_assertThisInitialized(_this));//get token from local storage\n_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.handleDeleteRow=_this.handleDeleteRow.bind(_assertThisInitialized(_this));//handler to delete a row\n_this.handleChangeRow=_this.handleChangeRow.bind(_assertThisInitialized(_this));return _this;}_createClass(ProgramsList,[{key:\"handleDeleteRow\",value:function handleDeleteRow(programName){var _this2=this;remove(programName).then(function(res){if(!res.err){_this2.removeRow(programName);_this2.createTable();}});}},{key:\"handleChangeRow\",value:function handleChangeRow(programID){var willChange=this.state.programList.find(function(_ref){var id=_ref.id;return id===programID;});this.setState({makeChanges:true,programChanges:willChange,program:'',username:'',password:'',password_re:''});}},{key:\"createForm\",value:function createForm(_ref2){var formState=_ref2.formState;var Field=function Field(_ref3){var _ref3$label=_ref3.label,label=_ref3$label===void 0?\"\":_ref3$label,_ref3$name=_ref3.name,name=_ref3$name===void 0?\"\":_ref3$name,_ref3$value=_ref3.value,value=_ref3$value===void 0?\"\":_ref3$value,onChange=_ref3.onChange;React.createElement(\"div\",{className:\"field\"},React.createElement(\"label\",{htmlFor:name},label),React.createElement(\"input\",{type:\"text\",name:name,value:value,onChange:onChange}));};return React.createElement(\"form\",{className:\"form\",onSubmit:this.onSubmit},React.createElement(\"fieldset\",null,React.createElement(Field,{name:formState.program,label:\"program\",value:formState.program,onChange:this.onChange}),React.createElement(Field,{name:formState.username,label:\"username\",value:formState.username,onChange:this.onChange}),React.createElement(Field,{name:formState.password,label:\"password\",value:formState.password,onChange:this.onChange}),React.createElement(Field,{name:formState.password_re,label:\"password again\",value:formState.password_re,onChange:this.onChange})),React.createElement(\"div\",{className:\"button-group\"},React.createElement(Button,null,formState.mode)));}},{key:\"createTable\",value:function createTable(_ref4){var _ref4$programList=_ref4.programList,programList=_ref4$programList===void 0?[]:_ref4$programList,updateCredentials=_ref4.updateCredentials,deleteCredentials=_ref4.deleteCredentials;return React.createElement(\"table\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Program\"),React.createElement(\"th\",null,\"Username\"),React.createElement(\"th\",null,\"Password\"),React.createElement(\"th\",null,\"Actions\")),programList.map(function(item,key){return React.createElement(\"tr\",null,React.createElement(\"td\",null,React.createElement(\"p\",null,item.program)),React.createElement(\"td\",null,React.createElement(\"p\",null,item.username)),React.createElement(\"td\",null,React.createElement(\"p\",null,item.password)),React.createElement(\"td\",null,React.createElement(Button,{className:\"delete-btn\",block:true,bsSize:\"large\",onClick:function onClick(){return updateCredentials(key);}}),React.createElement(Button,{className:\"change-btn\",block:true,bsSize:\"large\",onClick:function onClick(){return deleteCredentials(key);}})));}));}},{key:\"validateForm\",value:function validateForm(){if('username'in this.state.programChanges){return true;}else{if(this.state.username.length>0&&this.state.password.length>0&&this.state.password_re.length>0){return this.state.password===this.state.password_re;}}}},{key:\"getToken\",value:function getToken(){return localStorage.getItem('jwt-token');}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;var token=this.getToken();if(!token){this.props.history.push('/');}programs(token).then(function(res){if(!res.err){_this3.setState({programList:res.programs});}}).catch(function(err){_this3.props.history.push('/');});}},{key:\"render\",value:function render(){var _this$state2=this.state,programList=_this$state2.programList,formState=_this$state2.formState;return React.createElement(\"div\",{className:\"Programs\"},React.createElement(\"h1\",null,\"KEYBANK\"),React.createElement(\"div\",{className:\"programtable\"},this.createTable(),this.createForm()),React.createElement(\"div\",{className:\"addform\"},this.createForm()));}}]);return ProgramsList;}(Component);export default ProgramsList;","map":{"version":3,"sources":["/home/julius/.local/lib/python3.6/site-packages/userbank/userbank_ui/front/src/components/Programs.js"],"names":["React","Component","Button","FormGroup","FormLabel","FormControl","programs","credentials","remove","change","ProgramsList","props","resetFormState","setState","formState","program","username","password","password_re","id","onChange","e","state","target","name","value","onSubmit","programList","preventDefault","querySelector","mode","updating","users","lenght","index","find","item","updateCredentials","key","deleteCredentials","splice","makeChanges","programChanges","getToken","bind","handleDeleteRow","handleChangeRow","programName","then","res","err","removeRow","createTable","programID","willChange","Field","label","map","length","localStorage","getItem","token","history","push","catch","createForm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Button, FormGroup, FormLabel, FormControl} from \"react-bootstrap\"\nimport { programs, credentials, remove, change } from './UserFunctions'\n\n\nimport \"./Programs.css\"\n\n\nclass ProgramsList extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            programList: [], //store initial list of programs and credentials\n            makeChanges: false, //true if user wants to change existing credentials \n            programChanges: [],\n\n            formState: {\n                program: '', \n                username: '',\n                password:'',\n                password_re:'',\n                mode: \"submit\",\n            }\n\n\n        }\n        this.getToken = this.getToken.bind(this) //get token from local storage\n        this.onChange = this.onChange.bind(this)\n        this.onSubmit = this.onSubmit.bind(this)\n        this.handleDeleteRow = this.handleDeleteRow.bind(this) //handler to delete a row\n        this.handleChangeRow = this.handleChangeRow.bind(this)\n    }\n\n    resetFormState = () => {\n        this.setState({\n            formState:{\n                program: '',\n                username: '',\n                password: '',\n                password_re: '',\n                id: \"\"\n            }\n        })\n    }\n    \n    onChange = e => {\n        this.setState({\n            formState:{\n                ...this.state.formState,\n            \n                [e.target.name]: e.target.value\n            }\n        })\n    }\n\n    onSubmit = e => {\n        const { programList, formState } = this.state\n        e.preventDefault()\n        const program = e.target.querySelector(\"input[name='program']\").value      \n        const username = e.target.querySelector(\"input[name='username']\").value      \n        const password = e.target.querySelector(\"input[name='password']\").value      \n        const password_re = e.target.querySelector(\"input[name='password_re']\").value      \n        if(formState.mode === \"submit\"){\n            this.setState({\n                programList: [\n                    ...this.state.programList,\n                    {\n                        program,\n                        username,\n                        password,\n                        password_re,\n                        updating: false,\n                        id: this.state.programList[this.state.users.lenght-1].id+1\n                    }\n                ]\n            })\n        } else if (formState.mode === \"edit\"){\n            const index = programList.find((item) => item.id === formState.id).id\n            programList[index] = {\n                program,\n                username,\n                password,\n                updating: false,\n                id:programList[index].id\n            }\n            this.setState({\n                programList: [...programList]\n            })\n        }\n        this.resetFormState()\n    }\n\n    updateCredentials = key => {\n        let { programList } = this.state\n        programList[key].updating = true\n        this.setState({\n            formState: { ...this.state.programList[key], mode: \"edit\"},\n            programList\n        })\n\n    }\n\n    deleteCredentials = key => {\n        let { programList } = this.state\n        programList.splice(key, 1)\n        this.setState({\n            programList: [...programList]\n        })\n    }\n\n    handleDeleteRow(programName) {\n        remove(programName).then(res => {\n            if(!res.err) {\n                this.removeRow(programName)\n                this.createTable()\n            }               \n        })\n    }\n\n    handleChangeRow(programID){\n        const willChange = this.state.programList.find(({id}) =>  id === programID)\n        this.setState({\n            makeChanges: true,\n            programChanges: willChange,\n            program: '',\n            username: '',\n            password:'',\n            password_re:'',\n\n        }) \n    }\n\n\n    createForm({ formState }) {\n        const Field = ({label =\"\", name=\"\", value=\"\", onChange}) =>{\n            <div className=\"field\">\n                <label htmlFor={name}>{label}</label>\n                <input type=\"text\" name={name} value={value} onChange={onChange}/>\n            </div>\n        }\n\n        return (\n            <form className=\"form\" onSubmit={this.onSubmit}>\n                <fieldset>\n                    <Field \n                        name={formState.program}\n                        label=\"program\"\n                        value={formState.program}\n                        onChange={this.onChange}\n                    />\n                    <Field \n                        name={formState.username}\n                        label=\"username\"\n                        value={formState.username}\n                        onChange={this.onChange}\n                    />\n                    <Field \n                        name={formState.password}\n                        label=\"password\"\n                        value={formState.password}\n                        onChange={this.onChange}\n                    />\n                    <Field \n                        name={formState.password_re}\n                        label=\"password again\"\n                        value={formState.password_re}\n                        onChange={this.onChange}\n                    />\n                </fieldset>\n                <div className=\"button-group\">\n                    <Button>\n                        {formState.mode}\n                    </Button>\n                </div>\n            </form>\n        )      \n    }\n\n    createTable({ programList=[], updateCredentials, deleteCredentials }) {\n\n        return(\n            <table>\n                <tr>\n                    <th>Program</th>\n                    <th>Username</th>\n                    <th>Password</th>\n                    <th>Actions</th>\n                </tr>\n                \n                {programList.map((item, key) => (\n                \n                    <tr>\n                        <td>\n                            <p>{item.program}</p>\n                        </td>\n                        <td>\n                            <p>{item.username}</p>\n                        </td>\n                        <td>\n                            <p>{item.password}</p>\n                        </td>\n                        <td>\n                        <Button className=\"delete-btn\" block bsSize=\"large\" onClick={() => updateCredentials(key)}>\n                        </Button>\n                        <Button className=\"change-btn\" block bsSize=\"large\" onClick={() => deleteCredentials(key)}>\n                        </Button>\n                        </td>\n                    </tr>\n                \n                ))}\n        </table>\n        )}\n\n\n\n    validateForm() {\n        if('username' in this.state.programChanges){\n            return true\n        } else{\n            if (this.state.username.length > 0 && this.state.password.length > 0 && this.state.password_re.length > 0){ \n                return this.state.password === this.state.password_re\n            } \n        }      \n    }\n\n\n    \n    getToken(){\n        return localStorage.getItem('jwt-token')\n    }\n\n    componentDidMount() {\n        const token = this.getToken()\n        if(!token){\n            this.props.history.push('/')\n        }\n        programs(token).then(res => {      \n            if(!res.err) {\n                this.setState({\n                    programList: res.programs\n                })  \n            }\n        }).catch(err =>{\n            this.props.history.push('/')        \n        })\n    }\n\n   \n    render(){\n        const {programList, formState} = this.state\n        return (\n            <div className=\"Programs\">\n                <h1>KEYBANK</h1>\n                <div className=\"programtable\">\n                    \n                    {this.createTable()}\n                    {this.createForm()}\n\n\n                </div>\n                <div className=\"addform\">\n                    { this.createForm() }\n                </div>\n            </div>\n        )\n    }   \n}\n\nexport default ProgramsList"]},"metadata":{},"sourceType":"module"}